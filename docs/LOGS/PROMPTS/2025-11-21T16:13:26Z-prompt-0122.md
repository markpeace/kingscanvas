---
id: prompt-0122
epoch: 0010-prompt-refinement
issued_at: 2025-11-21T16:13:26Z
accepted_at: 2025-11-21T16:20:10Z
completed_at: 2025-11-21T16:20:10Z
status: completed
branch: work
pr:
validation_checks: []
---

LLM enforcement and diagnostics

## Notes
- Enforced mandatory LLM environment variable usage for server and client-visible model selection and added server-safe debug instrumentation for AI routes.
- Added server-side diagnostic logging for active models, prompts, and configuration errors to both debug sinks.
- Follow-up actions:
  - Await review of PR 1b Hotfix and monitor debug outputs in staging once deployed.

## Validation
- command: npm test -- --runInBand test/api/ai.suggest-steps.test.ts
  outcome: passed
  notes: ""
- command: scripts/validate_docs.sh
  outcome: passed
  notes: ""
