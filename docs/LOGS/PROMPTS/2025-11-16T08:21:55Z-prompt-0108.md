---
id: prompt-0108
epoch: epoch-0008
issued_at: 2025-11-16T08:21:55Z
accepted_at: 2025-11-16T08:21:55Z
completed_at: 2025-11-16T08:35:00Z
status: complete
branch: feature/epoch-0008/opportunity-ai-simulation
pr:
validation_checks:
  - command: npm test -- --runTestsByPath test/ui/StepCard.test.tsx test/hooks/useOpportunities.test.tsx
    outcome: pass
    notes: Verifies the step card wiring and opportunities hook behaviour.
---

## Summary
- Added debug instrumentation inside `StepCard` so every render logs the backend id, client id, and opportunity eligibility flags.
- Simplified the guard for rendering `StepOpportunitiesSection` to only depend on `isSuggested`, `isGhost`, and whether a backend id is present.
- Confirmed the opportunities hook logs initialisation/fetch events, keeping ghost cards excluded by only mounting the section for eligible steps.

## Notes
- Follow-up actions:
  - Monitor the debug panel in staging to confirm step ids appear as expected after autosave completes.

## Validation
- command: npm test -- --runTestsByPath test/ui/StepCard.test.tsx test/hooks/useOpportunities.test.tsx
  outcome: pass
  notes: Matches the validation_checks entry.
