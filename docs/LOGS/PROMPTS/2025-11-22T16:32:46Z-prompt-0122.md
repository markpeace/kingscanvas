---
id: prompt-0122
epoch: epoch-0010-prompt-refinement
issued_at: 2025-11-22T16:32:46Z
accepted_at: 2025-11-22T16:33:33Z
completed_at: 2025-11-22T16:33:33Z
status: completed
branch: work
pr: 24
validation_checks:
  - npm test -- test/api/ai.suggest-steps.test.ts
  - python - <<'PY'
    import json
    import pathlib
    import yaml
    from jsonschema import validate

    schema = json.loads(pathlib.Path('docs/SCHEMA/pr-log.schema.json').read_text())
    pr_path = pathlib.Path('docs/LOGS/PRS/pr-0024-epoch-0010-step-prompt-extraction.md')
    content = pr_path.read_text().splitlines()
    yaml_text = "\n".join(line for line in content if not line.startswith('# '))
    data = yaml.safe_load(yaml_text)
    validate(instance={k: data[k] for k in ['id', 'number', 'title', 'status']}, schema=schema)
    print('PR log schema validation passed')
    PY
---

Extract and rewrite step-generation prompt

## Notes
- Follow-up actions:
  - None

## Validation
- command: npm test -- test/api/ai.suggest-steps.test.ts
  outcome: passed
  notes: ""
- command: |
    python - <<'PY'
    import json
    import pathlib
    import yaml
    from jsonschema import validate

    schema = json.loads(pathlib.Path('docs/SCHEMA/pr-log.schema.json').read_text())
    pr_path = pathlib.Path('docs/LOGS/PRS/pr-0024-epoch-0010-step-prompt-extraction.md')
    content = pr_path.read_text().splitlines()
    yaml_text = "\n".join(line for line in content if not line.startswith('# '))
    data = yaml.safe_load(yaml_text)
    validate(instance={k: data[k] for k in ['id', 'number', 'title', 'status']}, schema=schema)
    print('PR log schema validation passed')
    PY
  outcome: passed
  notes: ""
