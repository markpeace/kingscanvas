---
id: prompt-0120
epoch: epoch-0010-prompt-refinement
issued_at: 2025-11-22T10:41:47Z
accepted_at: 2025-11-22T10:41:47Z
completed_at: 2025-11-22T10:42:15Z
status: completed
branch: work
pr: 22
validation_checks:
  - npm test -- test/api/ai.suggest-steps.test.ts
  - python - <<'PY'\nimport json\nimport pathlib\nimport yaml\nfrom jsonschema import validate\n\nschema = json.loads(pathlib.Path('docs/SCHEMA/pr-log.schema.json').read_text())\npr_path = pathlib.Path('docs/LOGS/PRS/pr-0022-epoch-0010-model-provenance.md')\ncontent = pr_path.read_text().splitlines()\nyaml_text = "\n".join(line for line in content if not line.startswith('# '))\ndata = yaml.safe_load(yaml_text)\nvalidate(instance={k: data[k] for k in ['id', 'number', 'title', 'status']}, schema=schema)\nprint('PR log schema validation passed')\nPY
---

## Summary
- Attach model provenance to AI suggestions returned by the suggest-steps API and surface it in the Canvas debug log.

## Notes
- Follow-up actions:
  - None

## Validation
- command: npm test -- test/api/ai.suggest-steps.test.ts
  outcome: passed
  notes: "Updated suggest-steps API test for model field."
- command: |
    python - <<'PY'
    import json
    import pathlib
    import yaml
    from jsonschema import validate

    schema = json.loads(pathlib.Path('docs/SCHEMA/pr-log.schema.json').read_text())
    pr_path = pathlib.Path('docs/LOGS/PRS/pr-0022-epoch-0010-model-provenance.md')
    content = pr_path.read_text().splitlines()
    yaml_text = "\n".join(line for line in content if not line.startswith('# '))
    data = yaml.safe_load(yaml_text)
    validate(instance={k: data[k] for k in ['id', 'number', 'title', 'status']}, schema=schema)
    print('PR log schema validation passed')
    PY
  outcome: passed
  notes: "Validated PR log against pr-log.schema.json."
